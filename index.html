<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TypeAttack - Type Fast. Type Well. Type to Survive.</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="css/game.css">
</head>
<body>
    <!-- Main Game Container -->
    <div id="game-container">
        <!-- Canvas for typing level (also used for attract mode) -->
        <canvas id="game-canvas" style="display: block;"></canvas>

        <!-- Vim editor DOM element (hidden by default) -->
        <div id="vim-editor" style="display:none;">
            <div id="vim-mode-indicator">NORMAL</div>
            <pre id="vim-content"></pre>
            <div id="vim-cursor"></div>
            <div id="vim-command-line"></div>
        </div>

        <!-- Tmux panes container (hidden by default) -->
        <div id="tmux-panes" style="display:none;">
            <div id="tmux-status-bar"></div>
            <div id="panes-container"></div>
        </div>
    </div>

    <!-- UI Overlay -->
    <div id="ui-overlay">
        <!-- Top Bar -->
        <div id="top-bar">
            <!-- Left: Control Buttons -->
            <div id="game-controls">
                <button id="pause-button" class="control-button" style="display:none;">PAUSE</button>
                <button id="reset-button" class="control-button" style="display:none;">RESET</button>
            </div>

            <!-- Center: Stage Chevrons (trophies/stars) -->
            <div id="stage-chevrons"></div>

            <!-- Right: Level Progress -->
            <div id="level-progress">
                <div class="level-indicator" id="typing-level">
                    <span class="level-name">TYPING</span>
                    <div class="level-bar"><div class="level-fill"></div></div>
                </div>
                <div class="level-indicator locked" id="vim-level">
                    <span class="level-name">VIM</span>
                    <span class="coming-soon">COMING SOON</span>
                </div>
                <div class="level-indicator locked" id="tmux-level">
                    <span class="level-name">TMUX</span>
                    <span class="coming-soon">COMING SOON</span>
                </div>
            </div>

            <!-- Right: Stats (hidden - kept for future use) -->
            <div id="stats-display" style="display: none;">
                <div class="stat-item">
                    <span class="stat-value" id="wpm-display">0</span>
                    <span class="stat-label">WPM</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="accuracy-display">100%</span>
                    <span class="stat-label">ACC</span>
                </div>
            </div>
        </div>

        <!-- FPS Counter -->
        <div id="fps-counter" style="display:none;">60 FPS</div>

        <!-- Pause/Settings indicators -->
        <div id="game-status">
            <span id="pause-indicator" style="display:none;">PAUSED</span>
            <span id="storage-warning" style="display:none;">⚠️ Progress not saving</span>
        </div>
    </div>

    <!-- Reset Confirmation Modal -->
    <div id="reset-modal" class="modal-overlay" style="display:none;">
        <div class="modal-content">
            <h2>RESET PROGRESS?</h2>
            <p>Are you sure you want to lose all your progress?</p>
            <p class="warning-text">This action cannot be undone!</p>
            <div class="modal-buttons">
                <button id="reset-confirm" class="modal-button danger">YES, RESET</button>
                <button id="reset-cancel" class="modal-button">CANCEL</button>
            </div>
        </div>
    </div>


    <!-- Start Screen Overlay -->
    <div id="start-screen" class="screen-overlay">
        <pre id="title-art">
████████╗██╗   ██╗██████╗ ███████╗ █████╗ ████████╗████████╗ █████╗  ██████╗██╗  ██╗
╚══██╔══╝╚██╗ ██╔╝██╔══██╗██╔════╝██╔══██╗╚══██╔══╝╚══██╔══╝██╔══██╗██╔════╝██║ ██╔╝
   ██║    ╚████╔╝ ██████╔╝█████╗  ███████║   ██║      ██║   ███████║██║     █████╔╝
   ██║     ╚██╔╝  ██╔═══╝ ██╔══╝  ██╔══██║   ██║      ██║   ██╔══██║██║     ██╔═██╗
   ██║      ██║   ██║     ███████╗██║  ██║   ██║      ██║   ██║  ██║╚██████╗██║  ██╗
   ╚═╝      ╚═╝   ╚═╝     ╚══════╝╚═╝  ╚═╝   ╚═╝      ╚═╝   ╚═╝  ╚═╝ ╚═════╝╚═╝  ╚═╝
        </pre>
        <h2>Type fast. Type well. Type to survive.</h2>
        <button id="start-button" class="game-button">START GAME</button>
        <div style="position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); color: #666; font-size: min(12px, 2.5vw); white-space: nowrap;">
            © 2025 Kerry Ivan Kurian. Made with ❤️ on the West Coast, USA.
        </div>
    </div>

    <!-- Load all JavaScript modules -->
    <script src="js/utils.js"></script>
    <script src="js/version-check.js"></script>
    <script src="js/attract-mode.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/audio.js"></script>
    <script src="js/keyboard.js"></script>
    <script src="js/renderer.js"></script>
    <script src="js/game-loop.js"></script>

    <!-- Entity modules -->
    <script src="js/entities/word.js"></script>
    <script src="js/entities/vim-challenge.js"></script>

    <!-- Generator modules -->
    <script src="js/generators/word-generator.js"></script>
    <script src="js/generators/corruption-generator.js"></script>

    <!-- Renderer modules -->
    <script src="js/renderers/typing-renderer.js"></script>

    <!-- Effect modules -->
    <script src="js/effects/laser-effect.js"></script>
    <script src="js/effects/vim-effects.js"></script>
    <script src="js/effects/polish.js"></script>

    <!-- Calculator modules -->
    <script src="js/calculators/typing-proficiency.js"></script>
    <script src="js/calculators/vim-proficiency.js"></script>
    <script src="js/calculators/vim-scoring.js"></script>
    <script src="js/calculators/tmux-proficiency.js"></script>

    <!-- Tracker modules -->
    <script src="js/trackers/challenge-tracker.js"></script>
    <script src="js/trackers/session-tracker.js"></script>
    <script src="js/trackers/mission-tracker.js"></script>

    <!-- System modules -->
    <script src="js/systems/progress-system.js"></script>
    <script src="js/systems/unlock-system.js"></script>
    <script src="js/systems/achievements.js"></script>
    <script src="js/systems/error-recovery.js"></script>
    <script src="js/systems/data-portability.js"></script>
    <script src="js/systems/replay.js"></script>
    <script src="js/systems/statistics.js"></script>
    <script src="js/systems/tutorial.js"></script>
    <script src="js/systems/accessibility.js"></script>

    <!-- UI modules -->
    <script src="js/ui/progress-dashboard.js"></script>
    <script src="js/ui/settings-panel.js"></script>
    <script src="js/ui/solution-display.js"></script>
    <script src="js/ui/start-screen.js"></script>
    <script src="js/ui/pause-menu.js"></script>
    <script src="js/ui/transitions.js"></script>
    <script src="js/ui/help-screen.js"></script>

    <!-- Vim modules -->
    <script src="js/components/vim-editor.js"></script>
    <script src="js/parsers/vim-parser.js"></script>
    <script src="js/executors/vim-executor.js"></script>

    <!-- Tmux modules -->
    <script src="js/components/tmux-panes.js"></script>
    <script src="js/handlers/tmux-handler.js"></script>
    <script src="js/managers/pane-manager.js"></script>
    <script src="js/stages/tmux-stage-1.js"></script>
    <script src="js/stages/tmux-stage-2.js"></script>
    <script src="js/stages/tmux-stage-3.js"></script>
    <script src="js/stages/tmux-stage-4.js"></script>
    <script src="js/stages/tmux-stage-5.js"></script>
    <script src="js/stages/tmux-stage-6.js"></script>

    <!-- Data modules -->
    <script src="js/data/word-corpus.js"></script>

    <!-- Debug modules -->
    <script src="js/debug/performance.js"></script>

    <!-- Level implementations -->
    <script src="js/typing.js"></script>
    <script src="js/vim.js"></script>
    <script src="js/tmux.js"></script>

    <!-- Main game controller (loaded last) -->
    <script src="js/game.js"></script>

    <!-- Initialize game when DOM ready -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize version checker
            window.versionChecker = new VersionChecker();

            // Initialize game
            window.game = new TypeAttackGame();
            // Game will auto-start when user clicks start button
        });
    </script>
</body>
</html>